/** grace 11.13.2015 **/
ALTER TABLE `rapidregistry`.`reportrequests` 
ADD COLUMN `fileTypeId` INT NOT NULL DEFAULT 6 AFTER `endProcessTime`,
ADD INDEX `fk_fileTypeId_idx` (`fileTypeId` ASC);
ALTER TABLE `rapidregistry`.`reportrequests` 
ADD CONSTRAINT `fk_rrFileTypeId`
  FOREIGN KEY (`fileTypeId`)
  REFERENCES `rapidregistry`.`lu_filetypes` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

  
ALTER TABLE `rapidregistry`.`reportrequestreports` 
DROP FOREIGN KEY `fk_rrr_repId`,
DROP FOREIGN KEY `fk_rrr_rrId`;
ALTER TABLE `rapidregistry`.`reportrequestreports` 
CHANGE COLUMN `reportRequestId` `reportRequestId` INT(11) NOT NULL ,
CHANGE COLUMN `reportId` `reportId` INT(11) NOT NULL ,
ADD COLUMN `reportFileName` VARCHAR(45) NULL AFTER `reportId`,
ADD COLUMN `startProcessingTime` DATETIME NULL AFTER `reportFileName`,
ADD COLUMN `endProcessingTime` DATETIME NULL AFTER `startProcessingTime`;
ALTER TABLE `rapidregistry`.`reportrequestreports` 
ADD CONSTRAINT `fk_rrr_repId`
  FOREIGN KEY (`reportId`)
  REFERENCES `rapidregistry`.`reportdetails` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION,
ADD CONSTRAINT `fk_rrr_rrId`
  FOREIGN KEY (`reportRequestId`)
  REFERENCES `rapidregistry`.`reportrequestreports` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;
  
  
  ALTER TABLE `rapidregistry`.`reportrequestreports` 
ADD COLUMN `statusId` INT NULL DEFAULT 1 AFTER `endProcessingTime`;
  
ALTER TABLE `rapidregistry`.`reportrequestreports` 
CHANGE COLUMN `startProcessingTime` `startProcessTime` DATETIME NULL DEFAULT NULL ,
CHANGE COLUMN `endProcessingTime` `endProcessTime` DATETIME NULL DEFAULT NULL ;


/** 11.15.2015 **/
ALTER TABLE `rapidregistry`.`reportrequests` 
ADD COLUMN `reportTypeId` INT NOT NULL DEFAULT 1 AFTER `endProcessTime`;

CREATE TABLE `reportquestions` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `reportId` int(11) NOT NULL,
  `surveyQuestionId` int(11) NOT NULL,
  `isGroupByQ` bit(1) NOT NULL DEFAULT b'0',
  `cwId` int(11) NOT NULL DEFAULT '0',
  `questionDisplay` text,
  `displayOrder` int(11) NOT NULL DEFAULT '1',
  `showInReport` bit(1) NOT NULL DEFAULT b'1',
  `dateCreated` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `parentQId` int(11) NOT NULL DEFAULT '0',
  `answerId` int(11) DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;